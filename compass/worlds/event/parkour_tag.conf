server = event

worlds = [
    {
        name = parkour_tag

        sections = {
            ref_maps = [
                [0, 0]
            ]
        }
    }
]

scans = [
    {
        sections = [
            ref_maps
        ]
        targets = {
            hub_hat = {
                type = REGION
                marker = "mcc:markers.parkour_tag.hub_hat"
                amount = "1"
            }
            match_hat = {
                type = REGION
                marker = "mcc:markers.parkour_tag.match_hat"
                amount = "1"
            }
            maps = {
                type = REGION
                marker = "mcc:markers.parkour_tag.map"
                amount = 1..
                metadata = {
                    "Id" = {
                        type = String
                    }
                }
            }
        }
    }
    {
        areas = [
            hub_hat
            match_hat
            maps
        ]
        targets = {
            anchor = {
                type = BLOCK
                marker = "mcc:markers.parkour_tag.anchor"
                amount = "1"
            }
        }
    }
    {
        areas = [
            hub_hat
        ]
        targets = {
            player_spawnpoints = {
                type = TRANSFORM
                marker = "mcc:markers.player_spawnpoints"
                amount = "8"
                metadata = {
                    "Side" = {
                        type = String
                        values = [
                            Home
                            Away
                        ]
                        // This ensures there's 4 on each side
                        amount = "4"
                    }
                }
            }
            spectator_spawnpoint = {
                type = TRANSFORM
                marker = "mcc:markers.spectator_spawnpoint"
                amount = 1..
            }
        }
    }
    {
        areas = [
            maps
        ]
        targets = {
            runner_spawnpoints = {
                type = TRANSFORM
                marker = "mcc:markers.parkour_tag.runner_spawnpoint"
                amount = "3"
            }
            hunter_spawnpoints = {
                type = TRANSFORM
                marker = "mcc:markers.parkour_tag.hunter_spawnpoints"
                amount = "1"
            }
        }
    }
    {
        areas = [
            match_hat
        ]
        targets = {
            match_home_area = {
                type = REGION
                marker = "mcc:markers.parkour_tag.home"
                amount = "1"
            }
            match_away_area = {
                type = REGION
                marker = "mcc:markers.parkour_tag.away"
                amount = "1"
            }
            spectator_spawnpoint = {
                type = TRANSFORM
                marker = "mcc:markers.spectator_spawnpoint"
                amount = 1..
            }
        }
    }
    {
        areas = [
            match_home_area
            match_away_area
        ]
        targets = {
            waiting_spawnpoints = {
                type = TRANSFORM
                marker = "mcc:markers.parkour_tag.lounge_spawnpoints"
                amount = "4"
            }
            selected_hunter_spawnpoint = {
                type = TRANSFORM
                marker = "mcc:markers.parkour_tag.selected_hunter_spawn"
                amount = "1"
            }
            hunter_selection_button = {
                type = BLOCK
                marker = "mcc:markers.parkour_tag.hunter_selection_button"
                amount = "1"
            }
            hunter_selection_cage_door = {
                type = BLOCK
                marker = "mcc:markers.parkour_tag.hunter_selection_cage_door"
                amount = "1"
            }
        }
    }
]
